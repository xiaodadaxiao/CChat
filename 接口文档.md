## 说明

接口的说明

## 接口

### 注册登录接口

#### 发送验证码

- url：/register/code

- 请求方式：post

- 说明：传递邮箱地址，发送验证码到邮箱，有效期为十分钟

- 请求参数：

| 参数  | 说明         | 是否必填 |
| ----- | ------------ | -------- |
| email | 要注册的邮箱 | 是       |

- 返回参数：

| 参数    | 说明                                                           |
| ------- | -------------------------------------------------------------- |
| status  | 200：成功；201：用户已存在；202：验证码还没过期；400：参数错误 |
| endTime | 验证码结束时间                                                 |

#### 注册账号

- url：/register

- 请求方式：post

- 说明：传递邮箱、验证码、密码 。注册用户

- 请求参数：

| 参数     | 说明         | 是否必填 |
| -------- | ------------ | -------- |
| email    | 要注册的邮箱 | 是       |
| code     | 验证码       | 是       |
| password | 密码         | 是       |

- 返回参数：

| 参数   | 说明                                                                          |
| ------ | ----------------------------------------------------------------------------- |
| status | 200：成功；201：用户已存在；400：参数错误；401：验证码过期；402：验证码不正确 |
| cid    | 用户唯一 id                                                                   |
| name   | 初始默认为“用户+cid“                                                          |
| email  | 用户注册的邮箱                                                                |

#### 登录

- url：/login

- 请求方式：post

- 说明：传递 CID、密码 。登录，返回 token 凭证

  > 注：token 需要在后续请求中，在请求头 Authorization 中携带

- 请求参数：

| 参数     | 说明              | 是否必填 |
| -------- | ----------------- | -------- |
| cid      | 要登录的 cid 账号 | 是       |
| password | 密码              | 是       |

- 返回参数：

| 参数   | 说明                                                     |
| ------ | -------------------------------------------------------- |
| status | 200：成功；400：参数错误；401：用户不存在；402：密码错误 |
| token  | 登录凭证                                                 |

### 权限认证接口

#### 检查 token

- url：/auth/token

- 请求方式：post

- 说明：传递 token。检查 token 是否有效

- 请求参数：

| 参数                            | 说明           | 是否必填 |
| ------------------------------- | -------------- | -------- |
| 在请求头字段 Authorization 携带 | 要校验的 token | 是       |

- 返回参数：

| 参数    | 说明                                          |
| ------- | --------------------------------------------- |
| status  | 200：成功；201：有效，附带新 token；400：无效 |
| cid     | 返回 token 中用户 cid                         |
| endTime | （status=200）token 结束时间                  |
| token   | （status=201）新的 token                      |

### 好友接口

#### 获得好友列表

- url：/friend/list

- 请求方式：get

- 说明：传递 token。得到所有好友信息的列表

- 请求参数：

| 参数                            | 说明           | 是否必填 |
| ------------------------------- | -------------- | -------- |
| 在请求头字段 Authorization 携带 | 要校验的 token | 是       |

- 返回参数：

| 参数   | 说明                                               |
| ------ | -------------------------------------------------- |
| status | 200：成功；201：好友数量为 0；400：无效            |
| data   | 返回的用户信息（json），以索引为对象分布[根据昵称] |

```json
{
  "status": 200,
  "data": {
    "x": [
      {
        "friendCid": "10001",
        "nickname": "小明",
        "lastTime": "2021-10-16T09:25:20.000Z",
        "state": 0,
        "avatarUrl": null,
        "friendName": "用户10001"
      }
    ],
    "#": [
      {
        "friendCid": "10002",
        "nickname": "???好友",
        "lastTime": "2021-10-15T10:29:17.000Z",
        "state": 0,
        "avatarUrl": null,
        "friendName": "用户10002"
      }
    ]
  }
}
```

#### 获得单个好友信息

- url：/friend/:cid

- 请求方式：get

- 说明：传递 token 和好友 cid。得到所有好友信息

- 请求参数：

| 参数                            | 说明           | 是否必填 |
| ------------------------------- | -------------- | -------- |
| 在请求头字段 Authorization 携带 | 要校验的 token | 是       |
| cid                             | 好友 cid       | 是       |

- 返回参数：

| 参数       | 说明                 |
| ---------- | -------------------- |
| status     | 200：成功；400：失败 |
| friendInfo | 返回的好友信息       |

#### 添加好友请求

- url：/friend/apply/:cid

- 请求方式：post

- 说明：传递 token、params 的要添加的 cid、message。添加申请记录

- 请求参数：

| 参数                            | 说明           | 是否必填 |
| ------------------------------- | -------------- | -------- |
| 在请求头字段 Authorization 携带 | 要校验的 token | 是       |
| message                         | 申请的信息     | 否       |

- 返回参数：

| 参数   | 说明                 |
| ------ | -------------------- |
| status | 200：成功；400：失败 |

#### 同意好友请求

- url：/friend/agree/:cid

- 请求方式：post

- 说明：传递 token、params 的要同意的用户 cid

- 请求参数：

| 参数                            | 说明           | 是否必填 |
| ------------------------------- | -------------- | -------- |
| 在请求头字段 Authorization 携带 | 要校验的 token | 是       |
| cid                             | 申请添加的用户 | 是       |

- 返回参数：

| 参数   | 说明                 |
| ------ | -------------------- |
| status | 200：成功；400：失败 |

#### 拒绝好友请求

- url：/friend/reject/:cid

- 请求方式：post

- 说明：传递 token、params 的要拒绝的用户 cid

- 请求参数：

| 参数                            | 说明           | 是否必填 |
| ------------------------------- | -------------- | -------- |
| 在请求头字段 Authorization 携带 | 要校验的 token | 是       |
| cid                             | 申请添加的用户 | 是       |

- 返回参数：

| 参数   | 说明                 |
| ------ | -------------------- |
| status | 200：成功；400：失败 |

#### 获取好友申请列表

- url：/friend/apply

- 请求方式：get

- 说明：传递 token。获得正在申请的好友申请列表

- 请求参数：

| 参数                            | 说明           | 是否必填 |
| ------------------------------- | -------------- | -------- |
| 在请求头字段 Authorization 携带 | 要校验的 token | 是       |

- 返回参数：

| 参数   | 说明                 |
| ------ | -------------------- |
| status | 200：成功；400：失败 |
| data   | 数据                 |



#### 删除好友

- url：/friend/:cid

- 请求方式：delete

- 说明：传递 token和好友cid，删除好友

- 请求参数：

| 参数                            | 说明            | 是否必填 |
| ------------------------------- | --------------- | -------- |
| 在请求头字段 Authorization 携带 | 要校验的 token  | 是       |
| cid                             | 要删除的好友cid | 是       |

- 返回参数：

| 参数   | 说明                 |
| ------ | -------------------- |
| status | 200：成功；400：失败 |

#### 修改好友备注

- url：/friend/:cid/nickname

- 请求方式：patch

- 说明：传递 token。和新昵称。更改好友昵称

- 请求参数：

| 参数                            | 说明             | 是否必填 |
| ------------------------------- | ---------------- | -------- |
| 在请求头字段 Authorization 携带 | 要校验的 token   | 是       |
| cid                             | 好友cid          | 是       |
| nickname                        | 要修改的nickname | 是       |

- 返回参数：

| 参数   | 说明                 |
| ------ | -------------------- |
| status | 200：成功；400：失败 |

#### 好友拉黑

- url：/friend/:cid/backlist

- 请求方式：post

- 说明：传递 token和好友cid，拉黑好友

- 请求参数：

| 参数                            | 说明            | 是否必填 |
| ------------------------------- | --------------- | -------- |
| 在请求头字段 Authorization 携带 | 要校验的 token  | 是       |
| cid                             | 要拉黑的好友cid | 是       |

- 返回参数：

| 参数   | 说明                 |
| ------ | -------------------- |
| status | 200：成功；400：失败 |



#### 得到好友黑名单

- url：/friend/backlist

- 请求方式：get

- 说明：传递 token，得到好友黑名单列表

- 请求参数：

| 参数                            | 说明           | 是否必填 |
| ------------------------------- | -------------- | -------- |
| 在请求头字段 Authorization 携带 | 要校验的 token | 是       |

- 返回参数：

| 参数     | 说明                 |
| -------- | -------------------- |
| status   | 200：成功；400：失败 |
| backList | 数据                 |



### 用户接口

#### 搜索用户 cid

- url：/user/search/:cid

- 请求方式：get

- 说明：传递要搜索的 cid，返回信息

- 请求参数：

| 参数                            | 说明         | 是否必填 |
| ------------------------------- | ------------ | -------- |
| 在请求头字段 Authorization 携带 | token        | 是       |
| cid                             | 要搜索的 cid | 是       |

- 返回参数：

| 参数   | 说明                          |
| ------ | ----------------------------- |
| status | 200：用户存在；400 用户不存在 |
| cid    | 返回的用户 cid                |

#### 获取用户信息

- url：/user/info/:cid

- 请求方式：get

- 说明：请求头 token，以及要查询的 cid，返回信息

- 请求参数：

| 参数                            | 说明         | 是否必填 |
| ------------------------------- | ------------ | -------- |
| cid                             | 要搜索的 cid | 是       |
| 在请求头字段 Authorization 携带 | token        | 是       |

- 返回参数：

| 参数     | 说明                          |
| -------- | ----------------------------- |
| status   | 200：请求成功；400 用户不存在 |
| relation | 我和该用户的关系              |
| userInfo | 用户信息                      |

relation.type:OWN 我本人，FRIEND 好友，STRANGER 陌生人， ME_ADDING 我正在添加该用户，ADDING_ME 该用户正在添加我

relation.info:对应 type 关系的信息：略

```js
{
    "status": 200,
    "relation": {
        "type": "ME_ADDING",
        "info": {
            "time": "2021-10-17T04:19:23.000Z",
            "message": "你好，我是小张"
        }
    },
    "userInfo": {
        "cid": "10002",
        "name": "用户10002",
        "avatarUrl": "https://file.qqtouxiang.com/1.jpeg",
        "signature": null
    }
}
```



#### 修改昵称

- url：/user/name/:name

- 请求方式：patch

- 说明：请求头 token，要修改的新昵称，修改用户昵称

- 请求参数：

| 参数                            | 说明   | 是否必填 |
| ------------------------------- | ------ | -------- |
| 在请求头字段 Authorization 携带 | token  | 是       |
| name                            | 新昵称 | 是       |

- 返回参数：

| 参数   | 说明                |
| ------ | ------------------- |
| status | 200：成功；400 失败 |

#### 修改签名

- url：/user/signature/:signature

- 请求方式：patch

- 说明：请求头 token，要修改的新签名，修改用户签名

- 请求参数：

| 参数                            | 说明   | 是否必填 |
| ------------------------------- | ------ | -------- |
| 在请求头字段 Authorization 携带 | token  | 是       |
| signature                       | 新签名 | 是       |

- 返回参数：

| 参数   | 说明                |
| ------ | ------------------- |
| status | 200：成功；400 失败 |

#### 修改密码

- url：/user/password

- 请求方式：patch

- 说明：请求头 token，要修改的新密码，旧密码。修改用户密码

- 请求参数：

| 参数                            | 说明   | 是否必填 |
| ------------------------------- | ------ | -------- |
| 在请求头字段 Authorization 携带 | token  | 是       |
| oldPassword【body】             | 旧密码 | 是       |
| newPassword【body】             | 新密码 | 是       |

- 返回参数：

| 参数   | 说明                |
| ------ | ------------------- |
| status | 200：成功；400 失败 |





### 群聊接口

#### 获取群聊信息

- url：/grouo/info/:gid

- 请求方式：get

- 说明：请求头 token，以及要查询的 gid，返回信息

- 请求参数：

| 参数  | 说明                          | 是否必填 |
| ----- | ----------------------------- | -------- |
| gid   | 要搜索的 gid                  | 是       |
| token | 请求头字段 Authorization 携带 | 是       |

- 返回参数：

| 参数      | 说明                    |
| --------- | ----------------------- |
| status    | 200：请求成功；400 失败 |
| relation  | 我和该群聊的关系        |
| groupinfo | 群聊信息                |

```js
{
    "status": 200,
    "relation": {
        "type": "LEADER",//角色
        "info": {//群内信息
            "nickname": "群主小林",
            "role": 1,
            "remind": 1
        }
    },
    "groupInfo": {
        "gid": "20000",
        "gname": "开发测试群",
        "notice": "测试开发展示群-测试开发展示群-测试开发展示群。",
        "leaderCid": "10000",
        "avatarUrl": null,
        "members": [
            {
                "cid": "10000",
                "name": "用户10000",
                "avatarUrl": "http://scimg.jianbihuadq.com/touxiang/202003/2020030915105554.jpg"
            },
            {
                "cid": "10001",
                "name": "用户10001",
                "avatarUrl": "https://file.qqtouxiang.com/xiaohai.jpeg"
            }
        ],
        "count": 2,
        "leaderInfo": {
            "cid": "10000",
            "name": "用户10000",
            "avatarUrl": "http://scimg.jianbihuadq.com/2020030915105554.jpg"
        }
    }
}
```

#### 获得群聊成员

- url：/grouo/list/:gid

- 请求方式：get

- 说明：请求头 token，以及要查询的 gid，返回信息

- 请求参数：

| 参数  | 说明                          | 是否必填 |
| ----- | ----------------------------- | -------- |
| gid   | 要搜索的 gid                  | 是       |
| token | 请求头字段 Authorization 携带 | 是       |

- 返回参数：

| 参数      | 说明                    |
| --------- | ----------------------- |
| status    | 200：请求成功；400 失败 |
| relation  | 我和该群聊的关系        |
| groupinfo | 群聊信息                |

```js
{
    "status": 200,
    "message": "获取成功",
    "data": [
        {
            "cid": "10000",
            "name": "用户10000",
            "nickname": "群主小林",
            "state": 0,
            "role": 1,
            "avatarUrl": "http://scimg.jianbihuadq.com/touxiang/202003/2020030915105554.jpg"
        },
        {
            "cid": "10001",
            "name": "用户10001",
            "nickname": "一哥",
            "state": 0,
            "role": 0,
            "avatarUrl": "https://file.qqtouxiang.com/xiaohaic.jpeg"
        }
    ]
}
```

#### 修改群昵称

- url：/member/nickname/:gid

- 请求方式：patch

- 说明：请求头 token，以及要查询的 gid，返回信息

- 请求参数：

| 参数     | 说明                          | 是否必填 |
| -------- | ----------------------------- | -------- |
| gid      | 要搜索的 gid                  | 是       |
| token    | 请求头字段 Authorization 携带 | 是       |
| nickname | 新的昵称                      | 是       |

- 返回参数：

| 参数   | 说明                    |
| ------ | ----------------------- |
| status | 200：修改成功；400 失败 |

#### 获取用户的所有群

- url：/member/list

- 请求方式：get

- 说明：请求头 token，返回用户所有群信息

- 请求参数：

| 参数  | 说明                          | 是否必填 |
| ----- | ----------------------------- | -------- |
| token | 请求头字段 Authorization 携带 | 是       |

- 返回参数：

| 参数   | 说明                    |
| ------ | ----------------------- |
| status | 200：修改成功；400 失败 |
| data   | 用户的群列表            |

```js
{
    "status": 200,
    "data": [
        {
            "gid": "20000",
            "gname": "开发测试群",
            "lastTime": null,
            "avatarUrl": "http://img.jf258.com/uploads/2014-09-10/221632155.jpg",
            "role": 1,
            "remind": 0
        },
        {
            "gid": "20001",
            "gname": "开心群",
            "lastTime": null,
            "avatarUrl": "http://www.gx8899.com/uploads/allimg/2016060814/wo1dkx1ae2m.jpg",
            "role": 0,
            "remind": 1
        }
    ]
}
```

#### 修改群通知状态

- url：/member/remind/:gid

- 请求方式：patch

- 说明：请求头 token，以及要修改的 gid、状态值，返回信息

- 请求参数：

| 参数   | 说明                          | 是否必填 |
| ------ | ----------------------------- | -------- |
| gid    | 要搜索的 gid                  | 是       |
| token  | 请求头字段 Authorization 携带 | 是       |
| remind | 要修改的值（boolean）         | 是       |

- 返回参数：

| 参数   | 说明                    |
| ------ | ----------------------- |
| status | 200：请求成功；400 失败 |

#### 修改群名

- url：/group/:gid/gname

- 请求方式：patch

- 说明：请求头 token，以及要修改的 gname，返回信息

- 请求参数：

| 参数  | 说明                          | 是否必填 |
| ----- | ----------------------------- | -------- |
| gid   | 要搜索的 gid                  | 是       |
| token | 请求头字段 Authorization 携带 | 是       |
| gname | 要修改的值                    | 是       |

- 返回参数：

| 参数   | 说明                    |
| ------ | ----------------------- |
| status | 200：请求成功；400 失败 |

#### 修改群简介

- url：/group/:gid/notice

- 请求方式：patch

- 说明：请求头 token，以及要修改的 gname，返回信息

- 请求参数：

| 参数   | 说明                          | 是否必填 |
| ------ | ----------------------------- | -------- |
| gid    | 要搜索的 gid                  | 是       |
| token  | 请求头字段 Authorization 携带 | 是       |
| notice | 要修改的值                    | 是       |

- 返回参数：

| 参数   | 说明                    |
| ------ | ----------------------- |
| status | 200：请求成功；400 失败 |

#### 搜索群

- url：/group/search/:gid

- 请求方式：get

- 说明：查询 gid 是否存在

- 请求参数：

| 参数 | 说明         | 是否必填 |
| ---- | ------------ | -------- |
| gid  | 要搜索的 gid | 是       |

- 返回参数：

| 参数      | 说明                   |
| --------- | ---------------------- |
| status    | 200：存在；400 :不存在 |
| groupInfo | 群信息                 |

#### 移除用户

- url：/member/:gid/user/:cid

- 请求方式：delete

- 说明：请求头 token（必须为群管理员），以及要移除的群和用户，返回信息

- 请求参数：

| 参数  | 说明                          | 是否必填 |
| ----- | ----------------------------- | -------- |
| gid   | 要操作的群                    | 是       |
| token | 请求头字段 Authorization 携带 | 是       |
| cid   | 要移除的用户                  | 是       |

- 返回参数：

| 参数   | 说明                    |
| ------ | ----------------------- |
| status | 200：请求成功；400 失败 |

#### 退出群聊

- url：/member/quit/:gid

- 请求方式：delete

- 说明：请求头 token，以及要退出的群，返回信息

- 请求参数：

| 参数  | 说明                          | 是否必填 |
| ----- | ----------------------------- | -------- |
| gid   | 要操作的群                    | 是       |
| token | 请求头字段 Authorization 携带 | 是       |

- 返回参数：

| 参数   | 说明                    |
| ------ | ----------------------- |
| status | 200：请求成功；400 失败 |

#### 申请入群

- url：/group/:gid/apply

- 请求方式：post

- 说明：请求头 token，以及要退出的群，返回信息

- 请求参数：

| 参数  | 说明                          | 是否必填 |
| ----- | ----------------------------- | -------- |
| gid   | 要申请的群                    | 是       |
| token | 请求头字段 Authorization 携带 | 是       |

- 返回参数：

| 参数   | 说明                    |
| ------ | ----------------------- |
| status | 200：请求成功；400 失败 |

#### 邀请多位好友入群

- url：/group/:gid/invite

- 请求方式：post

- 说明：请求头 token，以及要退出的群，返回信息

- 请求参数：

| 参数  | 说明                                | 是否必填 |
| ----- | ----------------------------------- | -------- |
| gid   | 要申请的群                          | 是       |
| users | 要邀请的好友 cid 数组（字符串数组） |          |
| token | 请求头字段 Authorization 携带       | 是       |

- 返回参数：

| 参数       | 说明                                                   |
| ---------- | ------------------------------------------------------ |
| status     | 200：全部添加邀请成功；201：部分添加邀请成功；400 失败 |
| applyCount | 邀请的数量                                             |

#### 获得关于群的好友列表

- url：/group/:gid/friend

- 请求方式：get

- 说明：请求头 token，以及要退出的群，返回信息

- 请求参数：

| 参数  | 说明                          | 是否必填 |
| ----- | ----------------------------- | -------- |
| gid   | 要查看的群                    | 是       |
| token | 请求头字段 Authorization 携带 | 是       |

- 返回参数：

| 参数   | 说明                                   |
| ------ | -------------------------------------- |
| status | 200：成功；201：好友数量为 0；400 失败 |
| data   | 返回的好友列表,isInGroup 表示是否在群  |

```js
{
    "status": 200,
    "data": [
        {
            "cid": "10001",
            "name": "用户10001",
            "nickname": "用户10001",
            "avatarUrl": "https://file.qqtouxiang.com/x3c.jpeg",
            "isInGroup": true
        },
        {
            "cid": "10002",
            "name": "用户10002",
            "nickname": "用户10002",
            "avatarUrl": "https://file.qqtouxiang.com/nv0f6.jpeg",
            "isInGroup": false
        },
        {
            "cid": "10003",
            "name": "用户10003",
            "nickname": "用户10003",
            "avatarUrl": "https://pic.qqtn.com/up556.jpg",
            "isInGroup": false
        }
    ]
}
```

#### 同意入群申请

- url：/group/:gid/apply/:inviteecid/agree

- 请求方式：get

- 说明：请求头 token，inviteecid 申请人的 cid，gid 群 gid，返回信息

- 请求参数：

| 参数       | 说明                                  | 是否必填 |
| ---------- | ------------------------------------- | -------- |
| gid        | 要加入的群                            | 是       |
| token      | 请求头字段 Authorization 携带【群主】 | 是       |
| inviteecid | 申请人的 cid                          | 是       |

- 返回参数：

| 参数   | 说明                |
| ------ | ------------------- |
| status | 200：成功；400 失败 |

#### 拒绝入群申请

- url：/group/:gid/apply/:inviteecid/reject

- 请求方式：get

- 说明：请求头 token，inviteecid 申请人的 cid，gid 群 gid，返回信息

- 请求参数：

| 参数       | 说明                                  | 是否必填 |
| ---------- | ------------------------------------- | -------- |
| gid        | 要加入的群                            | 是       |
| token      | 请求头字段 Authorization 携带【群主】 | 是       |
| inviteecid | 申请人的 cid                          | 是       |

- 返回参数：

| 参数   | 说明                |
| ------ | ------------------- |
| status | 200：成功；400 失败 |

#### 创建群

- url：/group/create

- 请求方式：post

- 说明：请求头 token，群名称 gname，返回信息

- 请求参数：

| 参数  | 说明                                  | 是否必填 |
| ----- | ------------------------------------- | -------- |
| gname | 要创建的群名称                        | 是       |
| token | 请求头字段 Authorization 携带【群主】 | 是       |

- 返回参数：

| 参数   | 说明                |
| ------ | ------------------- |
| status | 200：成功；400 失败 |
| gid    | 创建群生成的 gid    |

#### 解散群

- url：/group/:gid

- 请求方式：delete

- 说明：请求头 token，gid 群 gid，返回信息

- 请求参数：

| 参数  | 说明                                  | 是否必填 |
| ----- | ------------------------------------- | -------- |
| gid   | 要加入的群                            | 是       |
| token | 请求头字段 Authorization 携带【群主】 | 是       |

- 返回参数：

| 参数   | 说明                |
| ------ | ------------------- |
| status | 200：成功；400 失败 |

### 聊天信息相关接口

#### 请求首页聊天信息

- url：/chat/message

- 请求方式：get

- 说明：请求头 token，返回信息

- 请求参数：

| 参数  | 说明                          | 是否必填 |
| ----- | ----------------------------- | -------- |
| token | 请求头字段 Authorization 携带 | 是       |

- 返回参数：

| 参数   | 说明                                             |
| ------ | ------------------------------------------------ |
| status | 200：成功；400 失败                              |
| data   | 数据。type：group 群聊，friend：好友。data：数据 |

#### 请求好友聊天信息

- url：/message/friend/:cid

- 请求方式：get

- 说明：请求头 token，返回信息

- 请求参数：

| 参数   | 说明                          | 是否必填 |
| ------ | ----------------------------- | -------- |
| token  | 请求头字段 Authorization 携带 | 是       |
| cid    | 好友 cid                      | 是       |
| offset | 偏移数（query）               | 否       |
| size   | 数量（query）                 | 否       |

- 返回参数：

| 参数   | 说明                |
| ------ | ------------------- |
| status | 200：成功；400 失败 |
| count  | 信息总数            |
| data   | 数据。              |

#### 请求群聊天信息

- url：/message/group/:gid

- 请求方式：get

- 说明：请求头 token，返回信息

- 请求参数：

| 参数   | 说明                          | 是否必填 |
| ------ | ----------------------------- | -------- |
| token  | 请求头字段 Authorization 携带 | 是       |
| gid    | 群 gid                        | 是       |
| offset | 偏移数（query）               | 否       |
| size   | 数量（query）                 | 否       |

- 返回参数：

| 参数   | 说明                |
| ------ | ------------------- |
| status | 200：成功；400 失败 |
| count  | 信息总数            |
| data   | 数据。              |



#### 删除好友聊天记录

- url：/message/friend/:cid

- 请求方式：delete

- 说明：请求头 token，好友cid，返回信息

- 请求参数：

| 参数  | 说明                          | 是否必填 |
| ----- | ----------------------------- | -------- |
| token | 请求头字段 Authorization 携带 | 是       |
| cid   | 好友cid                       | 是       |

- 返回参数：

| 参数   | 说明                |
| ------ | ------------------- |
| status | 200：成功；400 失败 |



#### 删除群聊天记录

- url：/message/group/:gid

- 请求方式：delete

- 说明：请求头 token，群gid，返回信息

- 请求参数：

| 参数  | 说明                          | 是否必填 |
| ----- | ----------------------------- | -------- |
| token | 请求头字段 Authorization 携带 | 是       |
| gid   | 群gid                         | 是       |

- 返回参数：

| 参数   | 说明                |
| ------ | ------------------- |
| status | 200：成功；400 失败 |



### 位置相关接口

#### 请求位置信息

- url：/location/inversecoding

- 请求方式：get

- 说明：请求头 token、位置的经纬度信息、百度地图key，返回地址信息

- 请求参数：

| 参数        | 说明                          | 是否必填 |
| ----------- | ----------------------------- | -------- |
| token       | 请求头字段 Authorization 携带 | 是       |
| baiduMapKey | 你的百度地图key               | 是       |
| lat         | 位置经度                      | 是       |
| lng         | 位置维度                      | 是       |

- 返回参数：

| 参数   | 说明                |
| ------ | ------------------- |
| status | 200：成功；400 失败 |
| data   | 位置信息            |

### 文件相关接口

#### 聊天图片上传

- url：/upload/image
- 请求方式：post
- 说明：请求头 token、图片信息。返回图片url
- 请求头Content-Type：multipart/form-data;
- 请求参数：

| 说明                          | 是否必填 |
| ----------------------------- | -------- |
| 请求头字段 Authorization 携带 | 是       |
| 图片文件                      | 是       |
| 位置维度                      | 是       |

- 返回参数：

| 参数   | 说明                |
| ------ | ------------------- |
| status | 200：成功；400 失败 |
| url    | 图片url             |





## socket.io

发送参数 ： 事件名 + 数据

### 客户端

#### 发送消息

- 事件名 ：message

- 数据

| 参数     | 说明         |
| -------- | ------------ |
| content  | 消息内容     |
| chatId   | 接收者 id    |
| chatType | 接收者类型   |
| type     | 消息内容类型 |

#### 好友申请

- 事件名 ：friendApply

- 数据

| 参数    | 说明      |
| ------- | --------- |
| fromCid | 申请者cid |
| toCid   | 接收者 id |

#### 群申请

- 事件名 ：groupApply

- 数据

| 参数 | 说明        |
| ---- | ----------- |
| gid  | 申请的群gid |





### 服务端



#### 好友消息

- 事件名 ：friendMessage

- 数据

| 参数         | 说明         |
| ------------ | ------------ |
| content      | 消息内容     |
| listener_cid | 发言者cid    |
| talker_cid   | 接收者cid    |
| type         | 消息内容类型 |
| updateAt     | 消息发送时间 |
| avatar_url   | 发送者头像   |
| id           | 消息的id     |



#### 群消息

- 事件名 ：groupMessage

- 数据

| 参数       | 说明         |
| ---------- | ------------ |
| content    | 消息内容     |
| gid        | 群gid        |
| talker_cid | 接收者cid    |
| type       | 消息内容类型 |
| updateAt   | 消息发送时间 |
| avatar_url | 发送者头像   |
| id         | 消息的id     |
| chatId     | 群gid        |
| nickname   | 发送者群昵称 |
| role       | 发送者群角色 |

#### 好友申请

- 事件名 ：friendApply

- 数据：无

#### 群申请

- 事件名 ：groupApply

- 数据：无
